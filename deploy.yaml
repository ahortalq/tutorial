#################################################
# xl apply -f deploy.yaml --values version=2.0.0
#################################################
---
apiVersion: xl-deploy/v1
kind: Applications
spec:
- name: !format Applications/application-tutorial/tutorial-k8s/%version%
  type: udm.DeploymentPackage
  satisfiesOkTestManager: true
  satisfiesOkReleaseManager: true
  deployables:
  - name: container
    type: uccm.ContainerSpec
    image: !format lyhsoft/tutorial:%version%
    replicas: "{{ replicas }}"
    env:
      connection-string: "{{ connection-string }}"
      user-bdd: "{{ user-bdd }}"
    ports:
    - name: port
      type: uccm.ContainerPortSpec
      containerPort: 1234
      servicePort: 80
      exposeAsIngress: true
    progressive: true
